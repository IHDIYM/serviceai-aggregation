{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///S:/ServicesDataAgriggation/serviceai-aggregation/frontend/src/app/profile/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from 'react';\r\nimport { onAuthStateChanged } from 'firebase/auth';\r\nimport { auth } from '@/lib/firebase';\r\nimport { useRouter } from 'next/navigation';\r\nimport axios from \"axios\";\r\n\r\nexport default function ProfilePage() {\r\n  const router = useRouter();\r\n  const [profile, setProfile] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n      if (user) {\r\n        try {\r\n          const idToken = await user.getIdToken();\r\n          // Call backend to get profile\r\n          const res = await axios.post(\"http://localhost:4000/login\", { idToken });\r\n          setProfile(res.data);\r\n        } catch (err) {\r\n          setProfile(null);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      } else {\r\n        // No user is signed in, redirect to login.\r\n        router.push('/login');\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [router]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen\">\r\n        <p className=\"text-lg text-gray-600\">Loading Profile...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!profile) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen\">\r\n        <p className=\"text-lg text-gray-600\">Could not load profile data.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 p-4 sm:p-6 lg:p-8\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        <div className=\"bg-white shadow-lg rounded-xl overflow-hidden\">\r\n          <div className=\"p-8\">\r\n            <div className=\"text-center mb-8\">\r\n                <div className=\"h-32 w-32 rounded-full bg-gray-200 mx-auto flex items-center justify-center ring-4 ring-indigo-300\">\r\n                  <span className=\"text-5xl font-bold text-gray-500\">\r\n                    {profile.firstName?.charAt(0)}{profile.lastName?.charAt(0)}\r\n                  </span>\r\n                </div>\r\n                 <h1 className=\"text-4xl font-extrabold text-gray-900 mt-4\">{profile.firstName} {profile.lastName}</h1>\r\n                 <p className=\"text-xl font-semibold text-indigo-600\">{profile.title || profile.role}</p>\r\n                 <p className=\"text-md text-gray-500 mt-1\">{profile.email}</p>\r\n            </div>\r\n            \r\n            {profile.role === 'technician' && (\r\n              <>\r\n                <div className=\"mt-8 text-center\">\r\n                  <h2 className=\"text-lg font-bold text-gray-800\">Experience</h2>\r\n                  <p className=\"mt-2 text-gray-600 max-w-2xl mx-auto\">{profile.experience}</p>\r\n                </div>\r\n\r\n                <div className=\"mt-8\">\r\n                  <h2 className=\"text-lg font-bold text-gray-800 mb-3 text-center\">Specialties</h2>\r\n                  <div className=\"flex flex-wrap gap-2 justify-center\">\r\n                    {profile.specialties?.map((specialty: string, index: number) => (\r\n                      <span key={index} className=\"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full\">\r\n                        {specialty}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mt-8\">\r\n                  <h2 className=\"text-lg font-bold text-gray-800 mb-3 text-center\">Skills</h2>\r\n                  <div className=\"flex flex-wrap gap-2 justify-center\">\r\n                    {profile.skills?.map((skill: string, index: number) => (\r\n                      <span key={index} className=\"bg-green-100 text-green-800 text-sm font-medium px-3 py-1 rounded-full\">\r\n                        {skill}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {profile.role === 'manager' && (\r\n                <div className=\"text-center\">\r\n                    <p className=\"text-lg font-semibold text-gray-700\">Department: {profile.department}</p>\r\n                </div>\r\n            )}\r\n             {profile.role === 'user' && (\r\n                <div className=\"text-center\">\r\n                    <p className=\"text-lg font-semibold text-gray-700\">Location: {profile.location}</p>\r\n                </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}